{% extends 'base.html' %}

{% load static %}
{% load i18n %}

{% block title %}
    {% trans "اتصل بنا" %} - {% trans "إدريسي مارت" %}

{% endblock %}

{% block extra_css %}
    {{ form.media.css }}
{% endblock %}

{% block content %}
    <!-- Contact Hero Section -->
    <section class="page-hero">
        <div class="container">
            <div class="hero-content-center">
                <h1 class="page-title">
                    {% if LANGUAGE_CODE == 'ar' and contact_page.title_ar %}
                        {{ contact_page.title_ar }}
                    {% elif contact_page.title %}
                        {{ contact_page.title }}
                    {% else %}
                        {% trans "اتصل بنا" %}
                    {% endif %}
                </h1>
                <p class="page-subtitle">
                    {% if LANGUAGE_CODE == 'ar' and contact_page.description_ar %}
                        {{ contact_page.description_ar|safe }}
                    {% elif contact_page.description %}
                        {{ contact_page.description|safe }}
                    {% else %}
                        {% trans "تواصل مع فريق منصة إدريسي مارت للحصول على المساعدة والدعم في رحلتك الرقمية" %}
                    {% endif %}
                </p>
            </div>
        </div>
    </section>
    <!-- Contact Content Section -->
    <section class="contact-section">
        <div class="container">
            <!-- Contact Info Cards Row -->
            <div class="row g-4 mb-5">
                <div class="col-lg-4 col-md-6">
                    <div class="contact-info-card h-100">
                        <div class="contact-icon">
                            <svg width="32"
                                 height="32"
                                 viewBox="0 0 24 24"
                                 fill="none"
                                 stroke="currentColor"
                                 stroke-width="2">
                                <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z">
                                </path>
                            </svg>
                        </div>
                        <h3>{% trans "الهاتف" %}</h3>
                        <p>
                            <a href="tel:{{ config.CONTACT_PHONE }}" class="contact-link">{{ config.CONTACT_PHONE }}</a>
                        </p>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="contact-info-card h-100">
                        <div class="contact-icon">
                            <svg width="32"
                                 height="32"
                                 viewBox="0 0 24 24"
                                 fill="none"
                                 stroke="currentColor"
                                 stroke-width="2">
                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                                <polyline points="22,6 12,13 2,6"></polyline>
                            </svg>
                        </div>
                        <h3>{% trans "البريد الإلكتروني" %}</h3>
                        <p>
                            <a href="mailto:{{ config.CONTACT_EMAIL }}" class="contact-link">{{ config.CONTACT_EMAIL }}</a>
                        </p>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="contact-info-card h-100">
                        <div class="contact-icon">
                            <svg width="32"
                                 height="32"
                                 viewBox="0 0 24 24"
                                 fill="none"
                                 stroke="currentColor"
                                 stroke-width="2">
                                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                                <circle cx="12" cy="10" r="3"></circle>
                            </svg>
                        </div>
                        <h3>{% trans "العنوان" %}</h3>
                        <p>{% trans "القاهرة الجديدة، التجمع الأول، القاهرة، مصر" %}</p>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="contact-info-card h-100">
                        <div class="contact-icon">
                            <svg width="32"
                                 height="32"
                                 viewBox="0 0 24 24"
                                 fill="none"
                                 stroke="currentColor"
                                 stroke-width="2">
                                <path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4">
                                </path>
                            </svg>
                        </div>
                        <h3>{% trans "واتساب" %}</h3>
                        <p>
                            <a href="https://wa.me/{{ config.WHATSAPP_NUMBER }}"
                               target="_blank"
                               class="contact-link">+{{ config.WHATSAPP_NUMBER }}</a>
                        </p>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="contact-info-card h-100">
                        <div class="contact-icon">
                            <svg width="32"
                                 height="32"
                                 viewBox="0 0 24 24"
                                 fill="none"
                                 stroke="currentColor"
                                 stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <polyline points="12 6 12 12 16 14"></polyline>
                            </svg>
                        </div>
                        <h3>{% trans "ساعات العمل" %}</h3>
                        <p>
                            {% if LANGUAGE_CODE == 'ar' and contact_page.office_hours_ar %}
                                {{ contact_page.office_hours_ar|safe }}
                            {% elif contact_page.office_hours %}
                                {{ contact_page.office_hours|safe }}
                            {% else %}
                                {% trans "السبت - الخميس: 8:00 ص - 6:00 م" %}
                                <br>
                                {% trans "الجمعة: مغلق" %}
                            {% endif %}
                        </p>
                    </div>
                </div>
            </div>

            <!-- Contact Form -->
            <div class="contact-form-section">
                <div class="contact-form-wrapper">
                    <div class="form-header">
                        <h2 class="form-title">{% trans "أرسل لنا استفسارك" %}</h2>
                        <p class="form-description">{% trans "شاركنا تفاصيل استفسارك وسنقدم لك أفضل الحلول والدعم في منصة السوق الموحد" %}</p>
                    </div>
                    {% if messages %}
                        {% for message in messages %}
                            <div class="alert alert-{{ message.tags }} alert-dismissible fade show"
                                 role="alert">
                                {{ message }}
                                <button type="button"
                                        class="btn-close"
                                        data-bs-dismiss="alert"
                                        aria-label="Close"></button>
                            </div>
                        {% endfor %}
                    {% endif %}
                    <form method="post" class="contact-form" novalidate>
                        {% csrf_token %}
                        <div class="form-row">
                            <div class="form-group">
                                <label for="{{ form.name.id_for_label }}" class="form-label">
                                    {% trans "الاسم الكامل" %} <span class="required">*</span>
                                </label>
                                {{ form.name }}
                                {% if form.name.errors %}<div class="form-error">{{ form.name.errors.0 }}</div>{% endif %}
                            </div>
                            <div class="form-group">
                                <label for="{{ form.email.id_for_label }}" class="form-label">
                                    {% trans "البريد الإلكتروني" %} <span class="required">*</span>
                                </label>
                                {{ form.email }}
                                {% if form.email.errors %}<div class="form-error">{{ form.email.errors.0 }}</div>{% endif %}
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="{{ form.phone.id_for_label }}" class="form-label">{% trans "رقم الهاتف" %}</label>
                                {{ form.phone }}
                                {% if form.phone.errors %}<div class="form-error">{{ form.phone.errors.0 }}</div>{% endif %}
                            </div>
                            <div class="form-group">
                                <label for="{{ form.subject.id_for_label }}" class="form-label">
                                    {% trans "الموضوع" %} <span class="required">*</span>
                                </label>
                                {{ form.subject }}
                                {% if form.subject.errors %}<div class="form-error">{{ form.subject.errors.0 }}</div>{% endif %}
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="{{ form.message.id_for_label }}" class="form-label">
                                {% trans "الرسالة" %} <span class="required">*</span>
                            </label>
                            {{ form.message }}
                            {% if form.message.errors %}<div class="form-error">{{ form.message.errors.0 }}</div>{% endif %}
                        </div>
                        <button type="submit" class="btn-primary vendor-btn contact-submit">
                            <svg width="20"
                                 height="20"
                                 viewBox="0 0 24 24"
                                 fill="none"
                                 stroke="currentColor"
                                 stroke-width="2">
                                <line x1="22" y1="2" x2="11" y2="13"></line>
                                <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                            </svg>
                            <span>{% trans "إرسال الرسالة" %}</span>
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Map Section -->
    <section class="map-section py-5">
        <div class="container">
            <h2 class="section-title text-center mb-4">{% trans "موقعنا" %}</h2>
            <div class="row justify-content-center">
                <div class="col-lg-10 col-md-12">
                    <div class="products-card overflow-hidden">
                        {% autoescape off %}
                        {% if contact_page.map_embed_code %}
                            {{ contact_page.map_embed_code }}
                        {% else %}
                        <iframe src="https://www.google.com/maps/embed?pb=!1m17!1m12!1m3!1d3453.2516743776344!2d31.524689175467885!3d30.023110574891097!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m2!1m1!2zMzDCsDAxJzIzLjIiTiAzMcKwMzEnMzguOSJF!5e0!3m2!1sen!2seg!4v1729244880000!5m2!1sen!2seg"
                                width="100%"
                                height="450"
                                style="border: 0"
                                allowfullscreen
                                loading="lazy"
                                referrerpolicy="no-referrer-when-downgrade"
                                title="{% trans 'موقعنا على الخريطة' %}">
                        </iframe>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </section>

{% endblock %}

{% block extra_js %}
    {{ form.media.js }}
{% endblock %}
