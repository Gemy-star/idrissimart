{% extends 'base.html' %}

{% load static %}
{% load i18n %}

{% block title %}
    {% trans "ูู ูุญู" %} - {% trans "ุฅุฏุฑูุณู ูุงุฑุช" %}

{% endblock %}

{% block content %}
    <!-- About Hero Section -->
    <section class="page-hero">
        <div class="container">
            <div class="hero-content-center">
                <h1 class="page-title">
                    {% if LANGUAGE_CODE == 'ar' and about_page.title_ar %}
                        {{ about_page.title_ar }}
                    {% elif about_page.title %}
                        {{ about_page.title }}
                    {% else %}
                        {% trans "ุฅุฏุฑูุณู ูุงุฑุช" %}
                    {% endif %}
                </h1>
                <p class="page-tagline">{% trans "ููุตุฉ ุชุฌูุน ุณูู ูุงุญุฏ" %}</p>
                <p class="page-subtitle">
                    {% trans "ูุชุฎุตุต ูุณุชููุฏ ููู ุงููุชุฎุตุตูู ูุงูุฌูููุฑ ุงูุนุงู ุงูุฐู ูุญุชุงุฌ ุฅูู ุฃู ูู ุฎุฏูุงุช ูุฐุง ุงูุณูู" %}
                </p>
            </div>
        </div>
    </section>
    <!-- Who We Are Section -->
    <section class="about-section">
        <div class="container">
            <div class="about-content">
                <div class="about-text-block">
                    <h2 class="section-title">{% trans "ูู ูุญู" %}</h2>
                    <div class="about-description">
                        {% autoescape off %}
                        {% if LANGUAGE_CODE == 'ar' and about_page.content_ar %}
                            {{ about_page.content_ar }}
                        {% elif about_page.content %}
                            {{ about_page.content }}
                        {% else %}
                            <p>
                                {% trans "ุฅุฏุฑูุณู ูุงุฑุช ูู ููุตุฉ ูุชูุงููุฉ ุชุฌูุน ุฌููุน ุฎุฏูุงุช ุงูุณูู ูู ููุงู ูุงุญุฏุ ูุตููุฉ ุฎุตูุตุงู ูุชูุจูุฉ ุงุญุชูุงุฌุงุช ุงููุชุฎุตุตูู ูุงูุฌูููุฑ ุงูุนุงู ุนูู ุญุฏ ุณูุงุก." %}
                            </p>
                        {% endif %}
                        {% endautoescape %}
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Vision & Mission Section -->
    <section class="vision-mission-section">
        <div class="container">
            <div class="vm-grid">
                <div class="vm-card fancy-card">
                    <div class="vm-icon">
                        <svg width="48"
                             height="48"
                             viewBox="0 0 24 24"
                             fill="none"
                             stroke="currentColor"
                             stroke-width="2">
                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                            <circle cx="12" cy="12" r="3"></circle>
                        </svg>
                    </div>
                    <h3 class="vm-title">{% trans "ุฑุคูุชูุง" %}</h3>
                    <div class="vm-text">
                        {% autoescape off %}
                        {% if LANGUAGE_CODE == 'ar' and about_page.vision_ar %}
                            {{ about_page.vision_ar }}
                        {% elif about_page.vision %}
                            {{ about_page.vision }}
                        {% else %}
                            <p>
                                {% trans "ุฃู ูููู ุงูููุตุฉ ุงูุฑุงุฆุฏุฉ ูู ุชูุฏูู ุฎุฏูุงุช ูุชูุงููุฉ ุชุณูู ุญูุงุฉ ุงูุฃูุฑุงุฏ ูุงูุดุฑูุงุชุ ูุชุฑุจุท ุจูููู ุจูุนุงููุฉ ูู ุฎูุงู ุงูุชูููููุฌูุง ุงููุจุชูุฑุฉ ูุงูุดูุงููุฉ." %}
                            </p>
                        {% endif %}
                        {% endautoescape %}
                    </div>
                </div>
                <div class="vm-card fancy-card">
                    <div class="vm-icon">
                        <svg width="48"
                             height="48"
                             viewBox="0 0 24 24"
                             fill="none"
                             stroke="currentColor"
                             stroke-width="2">
                            <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
                            <polyline points="2 17 12 22 22 17"></polyline>
                            <polyline points="2 12 12 17 22 12"></polyline>
                        </svg>
                    </div>
                    <h3 class="vm-title">{% trans "ูููุชูุง" %}</h3>
                    <div class="vm-text">
                        {% autoescape off %}
                        {% if LANGUAGE_CODE == 'ar' and about_page.mission_ar %}
                            {{ about_page.mission_ar }}
                        {% elif about_page.mission %}
                            {{ about_page.mission }}
                        {% else %}
                            <p>
                                {% trans "ุชูููุฑ ููุตุฉ ูุชูุงููุฉ ุชุฌูุน ุฌููุน ุฎุฏูุงุช ุงูุณูู ูู ููุงู ูุงุญุฏุ ูุน ุถูุงู ุณูููุฉ ุงููุตูู ูุงูุงุณุชุฎุฏุงู ููุฌููุนุ ูุชูุฏูู ุฎุฏูุงุช ุนุงููุฉ ุงูุฌูุฏุฉ ูู ุงูุฅุนูุงูุงุช ุงููุจูุจุฉุ ุงููุชุฌุฑ ูุชุนุฏุฏ ุงูุชุฌุงุฑุ ุทูุจ ุงูุฎุฏูุงุชุ ุงูุฏูุฑุงุช ุงูุชุฏุฑูุจูุฉุ ูุงููุฑุต ุงููุธูููุฉ ุจููุงุกุฉ ููุนุงููุฉ." %}
                            </p>
                        {% endif %}
                        {% endautoescape %}
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Values Section -->
    <section class="values-section">
        <div class="container">
            <h2 class="section-title">{% trans "ููููุง ุงููุคุณุณูุฉ" %}</h2>
            {% autoescape off %}
            {% if LANGUAGE_CODE == 'ar' and about_page.values_ar %}
                {{ about_page.values_ar }}
            {% elif about_page.values %}
                {{ about_page.values }}
            {% else %}
            <div class="values-grid">
                <div class="value-card">
                    <div class="value-icon">
                        <svg width="40"
                             height="40"
                             viewBox="0 0 24 24"
                             fill="none"
                             stroke="currentColor"
                             stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                            <polyline points="14 2 14 8 20 8"></polyline>
                            <line x1="16" y1="13" x2="8" y2="13"></line>
                            <line x1="16" y1="17" x2="8" y2="17"></line>
                            <polyline points="10 9 9 9 8 9"></polyline>
                        </svg>
                    </div>
                    <h3 class="value-title">{% trans "ุงูุดููููุฉ" %}</h3>
                    <p class="value-text">{% trans "ููุฏู ุฌููุน ุฎุฏูุงุช ุงูุณูู ูู ููุตุฉ ูุงุญุฏุฉ ูุชูุงููุฉ ูุณููุฉ ุงูุงุณุชุฎุฏุงู" %}</p>
                </div>
                <div class="value-card">
                    <div class="value-icon">
                        <svg width="40"
                             height="40"
                             viewBox="0 0 24 24"
                             fill="none"
                             stroke="currentColor"
                             stroke-width="2">
                            <circle cx="12" cy="12" r="3"></circle>
                            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                            </path>
                        </svg>
                    </div>
                    <h3 class="value-title">{% trans "ุงูุชูููููุฌูุง ุงูุญุฏูุซุฉ" %}</h3>
                    <p class="value-text">{% trans "ูุณุชุฎุฏู ุฃุญุฏุซ ุงูุชูููุงุช ุงูุฑูููุฉ ูุถูุงู ุชุฌุฑุจุฉ ูุณุชุฎุฏู ูุชููุฒุฉ ูุขููุฉ" %}</p>
                </div>
                <div class="value-card">
                    <div class="value-icon">
                        <svg width="40"
                             height="40"
                             viewBox="0 0 24 24"
                             fill="none"
                             stroke="currentColor"
                             stroke-width="2">
                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path>
                        </svg>
                    </div>
                    <h3 class="value-title">{% trans "ุงูุซูุฉ ูุงูุฃูุงู" %}</h3>
                    <p class="value-text">{% trans "ูุถูู ุฃุนูู ูุณุชููุงุช ุงูุฃูุงู ูุงูุฎุตูุตูุฉ ูุญูุงูุฉ ุจูุงูุงุช ูุณุชุฎุฏูููุง" %}</p>
                </div>
                <div class="value-card">
                    <div class="value-icon">
                        <svg width="40"
                             height="40"
                             viewBox="0 0 24 24"
                             fill="none"
                             stroke="currentColor"
                             stroke-width="2">
                            <path d="M9 11a3 3 0 1 0 6 0a3 3 0 0 0-6 0"></path>
                            <path d="M17.657 16.657l-4.243 4.243a2 2 0 0 1-2.827 0l-4.244-4.243a8 8 0 1 1 11.314 0z"></path>
                        </svg>
                    </div>
                    <h3 class="value-title">{% trans "ุงููุตูู ุงูุณูู" %}</h3>
                    <p class="value-text">{% trans "ููุตุฉ ูุชุงุญุฉ ููุฌููุน ูู ุฃู ููุช ููู ุฃู ููุงู ูุน ูุงุฌูุฉ ุณููุฉ ุงูุงุณุชุฎุฏุงู" %}</p>
                </div>
            </div>
            {% endif %}
            {% endautoescape %}
        </div>
    </section>
    <!-- What We Offer Section -->
    <section class="offerings-section">
        <div class="container">
            <h2 class="section-title">{% trans "ูุงุฐุง ููุฏูุ" %}</h2>
            <div class="offerings-tabs">
                <div class="tab-buttons" role="tablist">
                    <button type="button"
                            id="tab-btn-individuals"
                            class="tab-btn active"
                            data-tab="individuals"
                            aria-selected="true">{% trans "ููุฃูุฑุงุฏ" %}</button>
                    <button type="button"
                            id="tab-btn-businesses"
                            class="tab-btn"
                            data-tab="businesses"
                            aria-selected="false">{% trans "ููุดุฑูุงุช ูุงูุชุฌุงุฑ" %}</button>
                </div>
                <div class="tab-pane fade show active"
                     id="individuals"
                     role="tabpanel"
                     aria-labelledby="tab-btn-individuals">
                    <div class="offerings-list">
                        <div class="offering-item">
                            <div class="offering-icon">๐ข</div>
                            <p>{% trans "ุฅุนูุงูุงุช ูุจูุจุฉ ูุชููุนุฉ ูุฌููุน ุงูุงุญุชูุงุฌุงุช ุงูููููุฉ" %}</p>
                        </div>
                        <div class="offering-item">
                            <div class="offering-icon">๐</div>
                            <p>{% trans "ุชุณูู ุณูู ูุขูู ูู ูุชุงุฌุฑ ูุชุนุฏุฏุฉ ุงูุชุฌุงุฑ" %}</p>
                        </div>
                        <div class="offering-item">
                            <div class="offering-icon">๐ง</div>
                            <p>{% trans "ุทูุจ ุฎุฏูุงุช ูุชุฎุตุตุฉ ูู ุงูุฎุจุฑุงุก ุงููุนุชูุฏูู" %}</p>
                        </div>
                        <div class="offering-item">
                            <div class="offering-icon">๐</div>
                            <p>{% trans "ุฏูุฑุงุช ุชุฏุฑูุจูุฉ ูุนุชูุฏุฉ ูุชุทููุฑ ุงูููุงุฑุงุช ุงูููููุฉ" %}</p>
                        </div>
                        <div class="offering-item">
                            <div class="offering-icon">๐ผ</div>
                            <p>{% trans "ูุฑุต ูุธูููุฉ ูุชููุนุฉ ูู ูุฎุชูู ุงููุฌุงูุงุช" %}</p>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade"
                     id="businesses"
                     role="tabpanel"
                     aria-labelledby="tab-btn-businesses">
                    <div class="offerings-list">
                        <div class="offering-item">
                            <div class="offering-icon">๐ช</div>
                            <p>{% trans "ุฅุฏุงุฑุฉ ูุชุฌุฑ ุฅููุชุฑููู ูุชูุงูู ูุน ุฃุฏูุงุช ุงูุจูุน ุงููุชูุฏูุฉ" %}</p>
                        </div>
                        <div class="offering-item">
                            <div class="offering-icon">๐</div>
                            <p>{% trans "ุชุญูููุงุช ุดุงููุฉ ูุฃุฏุงุก ุงููุชุฌุฑ ูุฒูุงุฏุฉ ุงููุจูุนุงุช" %}</p>
                        </div>
                        <div class="offering-item">
                            <div class="offering-icon">๐ค</div>
                            <p>{% trans "ุฎุฏูุงุช ุงูุชูุงุตู ูุน ุงูุนููุงุก ูุฅุฏุงุฑุฉ ุงูุทูุจุงุช" %}</p>
                        </div>
                        <div class="offering-item">
                            <div class="offering-icon">๐</div>
                            <p>{% trans "ุฃุฏูุงุช ุงูุชุณููู ูุงูุชุฑููุฌ ููููุชุฌุงุช ูุงูุฎุฏูุงุช" %}</p>
                        </div>
                        <div class="offering-item">
                            <div class="offering-icon">๐</div>
                            <p>{% trans "ุฃูุธูุฉ ุฏูุน ุขููุฉ ูุญูุงูุฉ ูุงููุฉ ููุจูุงูุงุช" %}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Statistics Section -->
    <section class="stats-section">
        <div class="container">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" data-target="5000">0</div>
                    <div class="stat-label">{% trans "ุฅุนูุงู ูุจูุจ" %}</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" data-target="1200">0</div>
                    <div class="stat-label">{% trans "ุชุงุฌุฑ ูุณุฌู" %}</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" data-target="25000">0</div>
                    <div class="stat-label">{% trans "ูุณุชุฎุฏู ูุดุท" %}</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" data-target="500">0</div>
                    <div class="stat-label">{% trans "ุฎุฏูุฉ ููุฏูุฉ" %}</div>
                </div>
            </div>
        </div>
    </section>
    <!-- CTA Section -->
    <section class="cta-section">
        <div class="container">
            <div class="cta-content">
                <h2 class="cta-title">{% trans "ุงูุถู ุฅูู ููุตุฉ ุงูุณูู ุงูููุญุฏ" %}</h2>
                <p class="cta-text">{% trans "ุงุจุฏุฃ ุฑุญูุชู ูู ุนุงูู ุงูุฃุนูุงู ุงูุฑููู ูุน ููุตุฉ ุชุฌูุน ุฌููุน ุฎุฏูุงุช ุงูุณูู ูู ููุงู ูุงุญุฏ" %}</p>
                <p class="cta-tagline">{% trans "ููุตุฉ ุชุฌูุน ุณูู ูุงุญุฏ" %}</p>
                <div class="cta-buttons">
                    <a href="{% url 'main:contact' %}" class="btn-primary vendor-btn">
                        <span>{% trans "ุงุจุฏุฃ ุงูุขู" %}</span>
                        <svg width="20"
                             height="20"
                             viewBox="0 0 24 24"
                             fill="none"
                             stroke="currentColor"
                             stroke-width="2">
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                            <polyline points="12 5 19 12 12 19"></polyline>
                        </svg>
                    </a>
                    <a href="{% url 'main:contact' %}" class="btn-secondary vendor-btn">
                        <span>{% trans "ุชูุงุตู ูุนูุง" %}</span>
                    </a>
                </div>
            </div>
        </div>
    </section>

{% endblock %}

{% block extra_js %}
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Tab functionality (scoped per tab group)
            document.querySelectorAll('.tab-buttons').forEach((btnContainer) => {
                const buttons = Array.from(btnContainer.querySelectorAll('.tab-btn'));
                // use nearest .container as the common root for buttons and panes
                const panesRoot = btnContainer.closest('.container') || document.body;
                const panes = Array.from(panesRoot.querySelectorAll('.tab-pane'));

                function deactivateLocal() {
                    buttons.forEach(b => {
                        b.classList.remove('active');
                        b.setAttribute('aria-selected', 'false');
                    });
                    panes.forEach(p => p.classList.remove('active', 'show'));
                }

                const anyActiveLocal = buttons.some(b => b.classList.contains('active'));
                if (!anyActiveLocal && buttons.length) {
                    const defaultBtn = buttons[0];
                    defaultBtn.classList.add('active');
                    defaultBtn.setAttribute('aria-selected', 'true');
                    const defaultTarget = defaultBtn.getAttribute('data-tab');
                    const el = defaultTarget ? panesRoot.querySelector('#' + defaultTarget) : null;
                    if (el) el.classList.add('active', 'show');
                }

                buttons.forEach((button) => {
                    button.addEventListener('click', function() {
                        const targetTab = this.getAttribute('data-tab');
                        if (!targetTab) return;
                        const targetEl = panesRoot.querySelector('#' + targetTab) || document.getElementById(targetTab);
                        if (!targetEl) return;

                        deactivateLocal();
                        this.classList.add('active');
                        this.setAttribute('aria-selected', 'true');
                        targetEl.classList.add('active', 'show');
                        this.focus();
                    });
                });
            });

            // Statistics counter animation
            const counters = document.querySelectorAll('.stat-number');
            const speed = 200; // lower = faster

            const animateCounters = () => {
                counters.forEach((counter) => {
                    const target = +counter.getAttribute('data-target');
                    const updateCount = () => {
                        const current = +counter.innerText.replace('+', '');
                        const increment = Math.ceil(target / speed);

                        if (current < target) {
                            counter.innerText = current + increment;
                            setTimeout(updateCount, 20);
                        } else {
                            counter.innerText = target.toLocaleString() + '+';
                        }
                    };
                    updateCount();
                });
            };

            // Trigger animation when section is visible
            const section = document.querySelector('.stats-section');
            if (section) {
                let started = false;

                const onScroll = () => {
                    const sectionTop = section.getBoundingClientRect().top;
                    const windowHeight = window.innerHeight;
                    if (!started && sectionTop < windowHeight - 100) {
                        started = true;
                        animateCounters();
                    }
                };

                window.addEventListener('scroll', onScroll);
                // Check on page load too
                onScroll();
            }
        });
    </script>
{% endblock extra_js %}
