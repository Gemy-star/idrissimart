{% extends "base.html" %}

{% load static i18n idrissimart_tags %}

{% block title %}
    {% trans "باقات نشر الإعلانات" %} - {% trans "إدريسي مارت" %}
{% endblock title %}

{% block extra_css %}
<style>
    :root {
        --primary-gradient: linear-gradient(135deg, var(--accent-purple) 0%, var(--accent-orange) 100%);
        --success-gradient: linear-gradient(135deg, var(--primary-color) 0%, var(--accent-purple) 100%);
        --premium-gradient: linear-gradient(135deg, var(--secondary-color) 0%, var(--accent-orange) 100%);
        --card-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        --card-shadow-hover: 0 25px 80px rgba(0, 0, 0, 0.2);
    }

    [data-theme='dark'] {
        --card-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
        --card-shadow-hover: 0 25px 80px rgba(0, 0, 0, 0.7);
    }

    /* Enhanced Hero Section */
    .packages-hero {
        background: var(--primary-gradient);
        padding: 100px 0 80px;
        color: var(--white-color);
        margin-bottom: 60px;
        position: relative;
        overflow: hidden;
    }

    .packages-hero::before {
        content: '';
        position: absolute;
        top: -50%;
        right: -10%;
        width: 600px;
        height: 600px;
        background: radial-gradient(circle, rgba(255,255,255,0.15) 0%, transparent 70%);
        border-radius: 50%;
        animation: float 8s ease-in-out infinite;
    }

    .packages-hero::after {
        content: '';
        position: absolute;
        bottom: -50%;
        left: -10%;
        width: 500px;
        height: 500px;
        background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
        border-radius: 50%;
        animation: float 10s ease-in-out infinite reverse;
    }

    @keyframes float {
        0%, 100% { transform: translate(0, 0) rotate(0deg); }
        33% { transform: translate(30px, -30px) rotate(5deg); }
        66% { transform: translate(-20px, 20px) rotate(-5deg); }
    }

    .packages-hero h1 {
        font-size: 3.5rem;
        font-weight: 800;
        margin-bottom: 1.5rem;
        position: relative;
        z-index: 1;
        text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        animation: fadeInDown 0.8s ease-out;
    }

    .packages-hero p {
        font-size: 1.3rem;
        opacity: 0.95;
        position: relative;
        z-index: 1;
        animation: fadeInUp 0.8s ease-out 0.2s both;
    }

    /* Enhanced Package Card */
    .package-card {
        border-radius: 24px;
        overflow: hidden;
        box-shadow: var(--card-shadow);
        transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        background: var(--bg-primary, var(--white-color));
        border: 2px solid var(--border-color, rgba(0, 0, 0, 0.08));
        position: relative;
        animation: fadeInUp 0.6s ease-out;
        backdrop-filter: blur(10px);
    }

    [data-theme='dark'] .package-card {
        background: var(--card-bg, #2d3748);
        border-color: rgba(255, 255, 255, 0.1);
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
    }

    .package-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: var(--primary-gradient);
        transform: scaleX(0);
        transition: transform 0.5s ease;
    }

    .package-card:hover::before {
        transform: scaleX(1);
    }

    .package-card:hover {
        transform: translateY(-20px) scale(1.03);
        box-shadow: var(--card-shadow-hover);
        border-color: var(--accent-purple);
    }

    [data-theme='dark'] .package-card:hover {
        box-shadow: 0 25px 80px rgba(0, 0, 0, 0.6);
        border-color: var(--accent-purple);
    }

    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* Enhanced Recommended Badge */
    .package-card.recommended {
        border: 3px solid var(--accent-gold);
        box-shadow: 0 15px 60px rgba(212, 175, 55, 0.3);
    }

    [data-theme='dark'] .package-card.recommended {
        border-color: var(--accent-gold);
        box-shadow: 0 15px 60px rgba(212, 175, 55, 0.4);
    }

    .recommended-badge {
        position: absolute;
        top: 15px;
        right: 15px;
        background: var(--premium-gradient);
        color: var(--white-color);
        padding: 10px 20px;
        border-radius: 50px;
        font-size: 0.85rem;
        font-weight: 700;
        z-index: 10;
        box-shadow: 0 6px 20px rgba(212, 175, 55, 0.5);
        animation: pulse 2s ease-in-out infinite, slideInDown 0.8s ease-out;
        letter-spacing: 0.5px;
        text-transform: uppercase;
    }

    .recommended-badge i {
        margin-left: 6px;
        animation: spin 3s linear infinite;
    }

    @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }

    @keyframes pulse {
        0%, 100% {
            transform: scale(1);
            box-shadow: 0 6px 20px rgba(212, 175, 55, 0.5);
        }
        50% {
            transform: scale(1.08);
            box-shadow: 0 8px 30px rgba(212, 175, 55, 0.7);
        }
    }
        animation: pulse 2s infinite;
        transition: all 0.3s ease;
    }

    .recommended-badge:hover {
        transform: scale(1.1);
        box-shadow: 0 6px 20px rgba(107, 76, 122, 0.6);
    }

    @keyframes pulse {
        0%, 100% {
            transform: scale(1);
        }
        50% {
            transform: scale(1.05);
        }
    }

    .recommended-badge i {
        margin-inline-end: 6px;
    }

    /* Enhanced Package Header */
    .package-header {
        padding: 50px 30px 35px;
        text-align: center;
        background: linear-gradient(180deg, rgba(107, 76, 122, 0.05) 0%, transparent 100%);
        transition: all 0.4s ease;
        position: relative;
        overflow: hidden;
    }

    [data-theme='dark'] .package-header {
        background: linear-gradient(180deg, rgba(107, 76, 122, 0.15) 0%, transparent 100%);
    }

    .package-header::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
        transition: left 0.6s ease;
    }

    .package-card:hover .package-header::before {
        left: 100%;
    }

    .package-card.recommended .package-header {
        background: var(--primary-gradient);
        color: var(--white-color);
    }

    .package-card.recommended .package-header::before {
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    }

    .package-name {
        font-size: 1.75rem;
        font-weight: 800;
        margin-bottom: 15px;
        color: var(--text-primary, var(--dark-gray));
        transition: all 0.3s ease;
        position: relative;
        z-index: 1;
    }

    [data-theme='dark'] .package-name {
        color: var(--text-primary);
    }
        animation: slideInDown 0.8s ease-out 0.2s both;
    }

    .package-card.recommended .package-name {
        color: var(--white-color);
    }

    .package-tagline {
        font-size: 0.9rem;
        opacity: 0.8;
        margin-bottom: 20px;
        color: var(--text-muted, var(--dark-gray));
        animation: slideInDown 0.8s ease-out 0.4s both;
    }

    [data-theme='dark'] .package-tagline {
        color: var(--text-muted, #cbd5e0);
    }

    .package-card.recommended .package-tagline {
        color: var(--white-color);
    }

    @keyframes slideInDown {
        from {
            opacity: 0;
            transform: translateY(-20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* Price Section */
    .package-price {
        display: flex;
        align-items: baseline;
        justify-content: center;
        gap: 5px;
        margin-bottom: 10px;
        animation: bounceIn 1s ease-out 0.6s both;
    }

    .currency {
        font-size: 1.2rem;
        font-weight: 600;
        color: var(--text-primary, var(--dark-gray));
        transition: all 0.3s ease;
    }

    [data-theme='dark'] .currency {
        color: var(--text-primary, #f7fafc);
    }

    .package-card.recommended .currency {
        color: var(--white-color);
    }

    .price-amount {
        font-size: 3.5rem;
        font-weight: 800;
        line-height: 1;
        color: var(--accent-purple);
        transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        text-shadow: 0 3px 6px rgba(0, 0, 0, 0.15);
        position: relative;
    }

    [data-theme='dark'] .price-amount {
        color: var(--accent-purple);
        text-shadow: 0 3px 10px rgba(167, 139, 189, 0.4);
    }

    .package-card.recommended .price-amount {
        color: var(--white-color);
        text-shadow: 0 3px 8px rgba(0, 0, 0, 0.4);
    }

    .package-card:hover .price-amount {
        transform: scale(1.15) rotate(2deg);
        text-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
    }

    .price-suffix {
        font-size: 0.9rem;
        opacity: 0.7;
        color: var(--text-muted, var(--dark-gray));
        transition: all 0.3s ease;
    }

    [data-theme='dark'] .price-suffix {
        color: var(--text-muted, #cbd5e0);
    }

    .package-card.recommended .price-suffix {
        color: var(--white-color);
    }

    @keyframes bounceIn {
        0% {
            opacity: 0;
            transform: scale(0.3);
        }
        50% {
            opacity: 1;
            transform: scale(1.05);
        }
        70% {
            transform: scale(0.9);
        }
        100% {
            opacity: 1;
            transform: scale(1);
        }
    }

    /* Package Body */
    .package-body {
        padding: 30px;
    }

    /* Enhanced Features List */
    .features-list {
        list-style: none;
        padding: 0;
        margin: 0 0 30px 0;
    }

    .features-list li {
        padding: 15px 0;
        display: flex;
        align-items: flex-start;
        gap: 14px;
        border-bottom: 1px solid rgba(0, 0, 0, 0.06);
        transition: all 0.3s ease;
    }

    [data-theme='dark'] .features-list li {
        border-bottom-color: rgba(255, 255, 255, 0.08);
    }

    .features-list li:hover {
        padding-right: 10px;
        background: rgba(107, 76, 122, 0.03);
    }

    [data-theme='dark'] .features-list li:hover {
        background: rgba(107, 76, 122, 0.1);
    }

    .features-list li:last-child {
        border-bottom: none;
    }

    .feature-icon {
        width: 24px;
        height: 24px;
        border-radius: 50%;
        background: var(--success-gradient);
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 11px;
        flex-shrink: 0;
        margin-top: 2px;
        box-shadow: 0 3px 8px rgba(107, 76, 122, 0.3);
        transition: all 0.3s ease;
    }

    .features-list li:hover .feature-icon {
        transform: scale(1.2) rotate(360deg);
        box-shadow: 0 5px 15px rgba(107, 76, 122, 0.5);
    }

    .feature-text {
        flex: 1;
        color: var(--dark-gray);
        font-size: 0.98rem;
        line-height: 1.6;
    }

    [data-theme='dark'] .feature-text {
        color: var(--text-primary, #f7fafc);
    }

    .package-card.recommended .feature-text {
        color: var(--text-primary, #2d3748);
    }

    /* Enhanced Subscribe Button */
    .btn-subscribe {
        width: 100%;
        padding: 16px 32px;
        border-radius: 16px;
        font-weight: 700;
        font-size: 1.05rem;
        border: none;
        background: var(--primary-gradient);
        color: var(--white-color);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 6px 20px rgba(107, 76, 122, 0.35);
        position: relative;
        overflow: hidden;
        letter-spacing: 0.5px;
        cursor: pointer;
        display: inline-block;
        text-align: center;
        text-decoration: none;
    }

    .btn-subscribe::before {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.3);
        transform: translate(-50%, -50%);
        transition: width 0.6s, height 0.6s;
    }

    .btn-subscribe:hover::before {
        width: 300px;
        height: 300px;
    }

    .btn-subscribe:hover {
        transform: translateY(-4px) scale(1.02);
        box-shadow: 0 10px 30px rgba(107, 76, 122, 0.5);
        color: var(--white-color);
    }

    .package-card.free .btn-subscribe {
        background: var(--success-gradient);
        box-shadow: 0 6px 20px rgba(75, 49, 94, 0.35);
    }

    .package-card.free .btn-subscribe:hover {
        box-shadow: 0 10px 30px rgba(75, 49, 94, 0.5);
    }

    /* Enhanced Category Badge */
    .category-badge {
        display: inline-block;
        padding: 8px 18px;
        background: linear-gradient(135deg, rgba(107, 76, 122, 0.15), rgba(107, 76, 122, 0.08));
        color: var(--accent-purple);
        border-radius: 50px;
        font-size: 0.88rem;
        font-weight: 700;
        margin-bottom: 18px;
        border: 2px solid rgba(107, 76, 122, 0.2);
        transition: all 0.3s ease;
        letter-spacing: 0.3px;
    }

    [data-theme='dark'] .category-badge {
        background: linear-gradient(135deg, rgba(107, 76, 122, 0.25), rgba(107, 76, 122, 0.15));
        border-color: rgba(107, 76, 122, 0.3);
    }

    .category-badge:hover {
        transform: scale(1.05);
        box-shadow: 0 4px 15px rgba(107, 76, 122, 0.3);
    }

    .package-card.recommended .category-badge {
        background: rgba(255, 255, 255, 0.25);
        color: var(--white-color);
        border-color: rgba(255, 255, 255, 0.4);
    }

    /* Enhanced Active Packages Section */
    .active-packages-section {
        background: var(--success-gradient);
        border-radius: 28px;
        padding: 50px;
        margin-bottom: 60px;
        color: var(--white-color);
        position: relative;
        overflow: hidden;
        box-shadow: 0 15px 50px rgba(107, 76, 122, 0.3);
    }

    .active-packages-section::before {
        content: '';
        position: absolute;
        top: -50%;
        right: -20%;
        width: 400px;
        height: 400px;
        background: radial-gradient(circle, rgba(255,255,255,0.15) 0%, transparent 70%);
        border-radius: 50%;
    }

    .active-packages-section h2 {
        position: relative;
        z-index: 1;
        text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
    }

    .active-package-card {
        background: rgba(255, 255, 255, 0.18);
        backdrop-filter: blur(15px);
        border: 2px solid rgba(255, 255, 255, 0.35);
        border-radius: 20px;
        padding: 30px;
        color: var(--white-color);
        transition: all 0.4s ease;
        position: relative;
        z-index: 1;
    }

    .active-package-card:hover {
        transform: translateY(-8px);
        background: rgba(255, 255, 255, 0.25);
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
    }

    .ads-remaining {
        font-size: 3.5rem;
        font-weight: 800;
        margin-bottom: 8px;
        text-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        animation: countUp 1s ease-out;
    }

    @keyframes countUp {
        from {
            opacity: 0;
            transform: scale(0.5);
        }
        to {
            opacity: 1;
            transform: scale(1);
        }
    }

    .expiry-date {
        background: rgba(255, 255, 255, 0.25);
        padding: 10px 20px;
        border-radius: 50px;
        font-size: 0.95rem;
        display: inline-block;
        font-weight: 600;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    /* Enhanced Information Card */
    .info-card {
        background: var(--bg-primary, var(--white-color)) !important;
        border: 2px solid var(--border-color, rgba(107, 76, 122, 0.15)) !important;
        border-radius: 28px !important;
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.12) !important;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        animation: slideInUp 0.8s ease-out;
        overflow: hidden;
        position: relative;
    }

    [data-theme='dark'] .info-card {
        background: var(--card-bg, #2d3748) !important;
        border-color: rgba(107, 76, 122, 0.3) !important;
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4) !important;
    }

    .info-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 5px;
        background: var(--primary-gradient);
        transform: scaleX(0);
        transition: transform 0.6s ease;
    }

    .info-card:hover::before {
        transform: scaleX(1);
    }

    .info-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.18) !important;
        border-color: var(--accent-purple) !important;
    }

    [data-theme='dark'] .info-card:hover {
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6) !important;
    }

    .info-card .card-body {
        background: transparent !important;
        padding: 40px !important;
    }

    .info-card h4 {
        color: var(--text-primary, var(--dark-gray)) !important;
        animation: fadeInLeft 0.8s ease-out 0.2s both;
        font-weight: 800;
        font-size: 1.5rem;
        margin-bottom: 30px;
    }

    [data-theme='dark'] .info-card h4 {
        color: var(--text-primary, #f7fafc) !important;
    }

    .info-card .text-primary {
        color: var(--accent-purple) !important;
    }

    .info-card .text-success {
        color: var(--primary-color) !important;
    }

    .info-card li {
        color: var(--text-primary, var(--dark-gray)) !important;
        transition: all 0.3s ease;
        animation: fadeInLeft 0.6s ease-out both;
        padding: 12px 0;
        font-size: 1.02rem;
        position: relative;
    }

    [data-theme='dark'] .info-card li {
        color: var(--text-primary, #f7fafc) !important;
    }

    .info-card li::before {
        content: '';
        position: absolute;
        left: 0;
        width: 0;
        height: 2px;
        background: var(--primary-gradient);
        bottom: 0;
        transition: width 0.4s ease;
    }

    .info-card li:hover::before {
        width: 100%;
    }

    .info-card li:nth-child(1) { animation-delay: 0.3s; }
    .info-card li:nth-child(2) { animation-delay: 0.4s; }
    .info-card li:nth-child(3) { animation-delay: 0.5s; }
    .info-card li:nth-child(4) { animation-delay: 0.6s; }
    .info-card li:nth-child(5) { animation-delay: 0.7s; }

    .info-card li:hover {
        transform: translateX(15px);
        color: var(--accent-purple) !important;
    }

    [data-theme='dark'] .info-card li:hover {
        color: var(--accent-purple, #a78bbd) !important;
    }

    .info-card li i {
        transition: all 0.3s ease;
    }

    .info-card li:hover i {
        transform: scale(1.3) rotate(360deg);
    }

    @keyframes slideInUp {
        from {
            opacity: 0;
            transform: translateY(50px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes fadeInLeft {
        from {
            opacity: 0;
            transform: translateX(-30px);
        }
        to {
            opacity: 1;
            transform: translateX(0);
        }
    }

    /* Enhanced Responsive */
    @media (max-width: 768px) {
        .packages-hero {
            padding: 60px 0 50px;
        }

        .packages-hero h1 {
            font-size: 2.2rem;
        }

        .packages-hero p {
            font-size: 1.1rem;
        }

        .price-amount {
            font-size: 2.8rem;
        }

        .package-header {
            padding: 40px 20px 25px;
        }

        .package-body {
            padding: 25px 20px;
        }

        .info-card li:hover {
            transform: translateX(8px);
        }

        .active-packages-section {
            padding: 30px 20px;
        }

        .active-package-card {
            padding: 25px 20px;
        }

        .ads-remaining {
            font-size: 2.8rem;
        }

        .package-card:hover {
            transform: translateY(-10px) scale(1.01);
        }
    }

    @media (max-width: 480px) {
        .packages-hero h1 {
            font-size: 1.8rem;
        }

        .price-amount {
            font-size: 2.5rem;
        }

        .package-name {
            font-size: 1.4rem;
        }
    }

    /* Additional Dark Theme Support */
    [data-theme='dark'] h2,
    [data-theme='dark'] h3,
    [data-theme='dark'] h4 {
        color: var(--text-primary, #f7fafc);
    }

    [data-theme='dark'] .text-muted {
        color: var(--text-muted, #cbd5e0) !important;
    }

    [data-theme='dark'] .text-primary {
        color: var(--accent-purple, #a78bbd) !important;
    }

    [data-theme='dark'] .text-success {
        color: var(--primary-color, #4b315e) !important;
    }

    [data-theme='dark'] .badge {
        background-color: rgba(255, 255, 255, 0.1);
        color: var(--text-primary, #f7fafc);
    }

    [data-theme='dark'] .btn-light {
        background-color: rgba(255, 255, 255, 0.1);
        color: var(--text-primary, #f7fafc);
        border-color: rgba(255, 255, 255, 0.2);
    }

    [data-theme='dark'] .btn-light:hover {
        background-color: rgba(255, 255, 255, 0.15);
        color: var(--text-primary, #f7fafc);
    }

    /* Strong tags in dark theme */
    [data-theme='dark'] .feature-text strong,
    [data-theme='dark'] strong {
        color: var(--accent-purple, #a78bbd);
    }

    .package-card.recommended .feature-text strong {
        color: var(--text-primary, #2d3748);
    }

    /* Active package cards text */
    .active-package-card h4,
    .active-package-card .ads-remaining,
    .active-package-card div {
        color: var(--white-color);
    }

</style>
{% endblock extra_css %}

{% block content %}
<!-- Hero Section -->
<section class="packages-hero">
    <div class="container">
        <div class="text-center">
            <h1>{% trans "باقات نشر الإعلانات" %}</h1>
            <p>{% trans "اختر الباقة المناسبة لاحتياجاتك وابدأ بنشر إعلاناتك بكل سهولة" %}</p>
        </div>
    </div>
</section>

<div class="container pb-5">
    <!-- Active Packages -->
    {% if active_packages %}
        <div class="active-packages-section" data-aos="fade-up">
            <h2 class="mb-4">
                <i class="fas fa-check-circle me-2"></i>{% trans "باقاتك النشطة" %}
            </h2>
            <div class="row g-4">
                {% for user_package in active_packages %}
                    <div class="col-md-6 col-lg-4">
                        <div class="active-package-card">
                            <h4 class="mb-3">{{ user_package.package.name }}</h4>

                            <div class="text-center mb-4">
                                <div class="ads-remaining">{{ user_package.ads_remaining }}</div>
                                <div style="opacity: 0.9;">{% trans "إعلانات متبقية" %}</div>
                            </div>

                            <div class="text-center mb-3">
                                <span class="expiry-date">
                                    <i class="fas fa-calendar me-2"></i>
                                    {% trans "تنتهي في:" %} {{ user_package.expiry_date|date:"Y/m/d" }}
                                </span>
                            </div>

                            {% if user_package.package.category %}
                                <div class="text-center mb-3">
                                    <span class="badge bg-white text-success">
                                        {{ user_package.package.category.name_ar|default:user_package.package.category.name }}
                                    </span>
                                </div>
                            {% endif %}

                            <a href="{% url 'main:ad_create' %}" class="btn btn-light w-100 mt-3">
                                <i class="fas fa-plus me-2"></i>{% trans "نشر إعلان جديد" %}
                            </a>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    {% endif %}

    <!-- Available Packages -->
    <div class="mb-5">
        <div class="text-center mb-5">
            <h2 class="fw-bold">{% trans "الباقات المتاحة" %}</h2>
            <p class="text-muted">{% trans "اختر الباقة التي تناسب احتياجاتك" %}</p>
        </div>

        <!-- General Packages -->
        {% if general_packages %}
            <h3 class="mb-4">
                <i class="fas fa-globe me-2 text-primary"></i>{% trans "الباقات العامة" %}
                <small class="text-muted">{% trans "(صالحة لجميع الأقسام)" %}</small>
            </h3>

            <div class="row g-4 mb-5">
                {% for package in general_packages %}
                    <div class="col-md-6 col-lg-4" data-aos="fade-up">
                        <div class="package-card {% if package.is_recommended %}recommended{% endif %} {% if package.price == 0 %}free{% endif %}">
                            {% if package.is_recommended %}
                                <div class="recommended-badge">
                                    <i class="fas fa-star"></i>{% trans "موصى به" %}
                                </div>
                            {% endif %}

                            <div class="package-header">
                                <h3 class="package-name">
                                    {% if LANGUAGE_CODE == 'ar' and package.name %}
                                        {{ package.name }}
                                    {% else %}
                                        {{ package.name_en|default:package.name }}
                                    {% endif %}
                                </h3>

                                {% if package.is_default %}
                                    <span class="category-badge">
                                        <i class="fas fa-gift me-1"></i>{% trans "باقة افتراضية" %}
                                    </span>
                                {% endif %}

                                <div class="package-price">
                                    {% if package.price == 0 %}
                                        <span class="price-amount" style="font-size: 2.5rem;">{% trans "مجاناً" %}</span>
                                    {% else %}
                                        <span class="currency">EGP</span>
                                        <span class="price-amount">{{ package.price|floatformat:2 }}</span>
                                    {% endif %}
                                </div>

                                {% if package.price > 0 %}
                                    <div class="price-suffix">{% trans "صالحة لمدة" %} {{ package.duration_days }} {% trans "يوم" %}</div>
                                {% endif %}
                            </div>

                            <div class="package-body">
                                <ul class="features-list">
                                    <!-- عدد الإعلانات -->
                                    <li>
                                        <div class="feature-icon"><i class="fas fa-check"></i></div>
                                        <div class="feature-text">
                                            <strong>{{ package.ad_count }}</strong>
                                            {% trans "عدد الإعلانات المسموح بها" %}
                                        </div>
                                    </li>

                                    <!-- مدة ظهور الإعلان -->
                                    <li>
                                        <div class="feature-icon"><i class="fas fa-check"></i></div>
                                        <div class="feature-text">
                                            {% trans "مدة ظهور" %} <strong>{{ package.ad_duration_days }}</strong> {% trans "يوم لكل إعلان" %}
                                        </div>
                                    </li>

                                    <!-- Feature Prices -->
                                    {% if package.feature_pinned_price > 0 %}
                                    <li>
                                        <div class="feature-icon"><i class="fas fa-check"></i></div>
                                        <div class="feature-text">
                                            {% trans "تثبيت الإعلان" %}
                                            (<strong>{{ package.feature_pinned_price }} EGP</strong>)
                                        </div>
                                    </li>
                                    {% endif %}

                                    {% if package.feature_urgent_price > 0 %}
                                    <li>
                                        <div class="feature-icon"><i class="fas fa-check"></i></div>
                                        <div class="feature-text">
                                            {% trans "إعلان عاجل" %}
                                            (<strong>{{ package.feature_urgent_price }} EGP</strong>)
                                        </div>
                                    </li>
                                    {% endif %}

                                    {% if package.feature_highlighted_price > 0 %}
                                    <li>
                                        <div class="feature-icon"><i class="fas fa-check"></i></div>
                                        <div class="feature-text">
                                            {% trans "إعلان مميز" %}
                                            (<strong>{{ package.feature_highlighted_price }} EGP</strong>)
                                        </div>
                                    </li>
                                    {% endif %}

                                    <!-- Custom Features -->
                                    {% for feature in package.get_features_list %}
                                    <li>
                                        <div class="feature-icon"><i class="fas fa-check"></i></div>
                                        <div class="feature-text">{{ feature }}</div>
                                    </li>
                                    {% endfor %}

                                    <!-- Additional Info -->
                                    {% if package.is_default %}
                                    <li>
                                        <div class="feature-icon"><i class="fas fa-check"></i></div>
                                        <div class="feature-text">{% trans "تُمنح تلقائياً عند التسجيل" %}</div>
                                    </li>
                                    {% endif %}
                                </ul>

                                <form method="post" action="{% url 'main:package_purchase' package.id %}" style="display: inline;">
                                    {% csrf_token %}
                                    <button type="submit" class="btn-subscribe">
                                        <i class="fas fa-bolt me-2"></i>
                                        {% if package.price == 0 %}
                                            {% trans "تفعيل الآن" %}
                                        {% else %}
                                            {% trans "اشترك الآن" %}
                                        {% endif %}
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% endif %}

        <!-- Category-Specific Packages -->
        {% if category_packages %}
            <h3 class="mb-4">
                <i class="fas fa-layer-group me-2 text-success"></i>{% trans "باقات خاصة بالأقسام" %}
            </h3>

            {% for category, packages in category_packages.items %}
                <div class="mb-5">
                    <h4 class="mb-3 text-primary">
                        <i class="fas fa-tag me-2"></i>{{ category.name_ar|default:category.name }}
                    </h4>

                    <div class="row g-4">
                        {% for package in packages %}
                            <div class="col-md-6 col-lg-4" data-aos="fade-up">
                                <div class="package-card {% if package.is_recommended %}recommended{% endif %}">
                                    {% if package.is_recommended %}
                                        <div class="recommended-badge">
                                            <i class="fas fa-star"></i>{% trans "موصى به" %}
                                        </div>
                                    {% endif %}

                                    <div class="package-header">
                                        <div class="category-badge">
                                            <i class="fas fa-tag me-1"></i>{{ category.name_ar|default:category.name }}
                                        </div>

                                        <h3 class="package-name">{{ package.name }}</h3>

                                        <div class="package-price">
                                            <span class="currency">EGP</span>
                                            <span class="price-amount">{{ package.price|floatformat:2 }}</span>
                                        </div>

                                        <div class="price-suffix">{% trans "لمدة" %} {{ package.duration_days }} {% trans "يوم" %}</div>
                                    </div>

                                    <div class="package-body">
                                        <ul class="features-list">
                                            <li>
                                                <div class="feature-icon"><i class="fas fa-check"></i></div>
                                                <div class="feature-text">
                                                    <strong>{{ package.ad_count }}</strong> {% trans "إعلان" %}
                                                </div>
                                            </li>
                                            <li>
                                                <div class="feature-icon"><i class="fas fa-check"></i></div>
                                                <div class="feature-text">
                                                    {% trans "ظهور" %} <strong>{{ package.ad_duration_days }}</strong> {% trans "يوم" %}
                                                </div>
                                            </li>

                                            {% for feature in package.get_features_list %}
                                            <li>
                                                <div class="feature-icon"><i class="fas fa-check"></i></div>
                                                <div class="feature-text">{{ feature }}</div>
                                            </li>
                                            {% endfor %}
                                        </ul>

                                        <form method="post" action="{% url 'main:package_purchase' package.id %}" style="display: inline;">
                                            {% csrf_token %}
                                            <button type="submit" class="btn-subscribe">
                                                <i class="fas fa-shopping-cart me-2"></i>{% trans "شراء الباقة" %}
                                            </button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            {% endfor %}
        {% endif %}
    </div>

    <!-- Information Section -->
    <div class="row mt-5">
        <div class="col-lg-8 mx-auto">
            <div class="card info-card border-0 shadow-sm">
                <div class="card-body p-4">
                    <h4 class="mb-4">
                        <i class="fas fa-info-circle text-primary me-2"></i>{% trans "معلومات هامة" %}
                    </h4>
                    <ul class="list-unstyled">
                        <li class="mb-3">
                            <i class="fas fa-check-circle text-success me-2"></i>
                            {% trans "يحصل كل مستخدم جديد على باقة مجانية عند التسجيل" %}
                        </li>
                        <li class="mb-3">
                            <i class="fas fa-check-circle text-success me-2"></i>
                            {% trans "عدد الإعلانات في الباقة غير مرتبط بمدة صلاحية الباقة" %}
                        </li>
                        <li class="mb-3">
                            <i class="fas fa-check-circle text-success me-2"></i>
                            {% trans "كل إعلان له مدة ظهور محددة حسب الباقة" %}
                        </li>
                        <li class="mb-3">
                            <i class="fas fa-check-circle text-success me-2"></i>
                            {% trans "يمكنك إضافة مميزات خاصة لإعلانك (تثبيت، عاجل، مميز) برسوم إضافية" %}
                        </li>
                        <li>
                            <i class="fas fa-check-circle text-success me-2"></i>
                            {% trans "الباقات الخاصة بالأقسام تقدم أسعار مخفضة لأقسام محددة" %}
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock content %}

{% block extra_js %}
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
<script>
    AOS.init({
        duration: 800,
        once: true
    });
</script>
{% endblock extra_js %}
