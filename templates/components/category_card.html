{% load static i18n %}

<div class="col-lg-3 col-md-4 col-sm-6 col-12">
    <div class="category-card"
         data-category-id="{{ category.id }}"
         data-category-slug="{{ category.slug|default:category.id }}"
         role="button"
         tabindex="0"
         aria-label="{% trans 'استكشف فئة' %} {{ category.name_ar|default:category.name }}">

        <div class="category-icon-wrapper">
            <div class="category-icon">
                {% if category.icon %}
                    <i class="{{ category.icon }}"></i>
                {% else %}
                    <i class="fas fa-folder"></i>
                {% endif %}
            </div>
            <div class="category-loader" style="display: none;">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">{% trans "جارٍ التحميل..." %}</span>
                </div>
            </div>
        </div>

        <div class="category-info">
            <h3 class="category-title">{{ category.name_ar|default:category.name }}</h3>
            {% if category.description %}
                <p class="category-desc">{{ category.description|truncatechars:80 }}</p>
            {% endif %}

            <div class="category-stats">
                {% if subcats_count and subcats_count > 0 %}
                    <span class="subcat-count">
                        <i class="fas fa-list"></i>
                        {{ subcats_count }} {% trans "فئة فرعية" %}
                    </span>
                {% endif %}
                {% comment %}
                    Generic content count - adapts based on content type
                    Supports: ads_count, content_count, products_count, services_count, etc.
                {% endcomment %}
                {% if category.content_count and category.content_count > 0 %}
                    <span class="content-count">
                        {% if content_type == 'classified' or not content_type %}
                            <i class="fas fa-bullhorn"></i>
                            {{ category.content_count }} {% trans "إعلان" %}
                        {% elif content_type == 'product' %}
                            <i class="fas fa-box"></i>
                            {{ category.content_count }} {% trans "منتج" %}
                        {% elif content_type == 'service' %}
                            <i class="fas fa-concierge-bell"></i>
                            {{ category.content_count }} {% trans "خدمة" %}
                        {% elif content_type == 'job' %}
                            <i class="fas fa-briefcase"></i>
                            {{ category.content_count }} {% trans "وظيفة" %}
                        {% elif content_type == 'course' %}
                            <i class="fas fa-chalkboard-teacher"></i>
                            {{ category.content_count }} {% trans "دورة" %}
                        {% else %}
                            <i class="fas fa-items"></i>
                            {{ category.content_count }} {% trans "عنصر" %}
                        {% endif %}
                    </span>
                {% elif category.ads_count and category.ads_count > 0 %}
                    {% comment %} Legacy support for ads_count {% endcomment %}
                    <span class="ads-count">
                        <i class="fas fa-bullhorn"></i>
                        {{ category.ads_count }} {% trans "إعلان" %}
                    </span>
                {% endif %}
            </div>

            <div class="explore-btn">
                <i class="fas fa-arrow-left me-2"></i>
                <span>{% trans "استكشف" %}</span>
            </div>
        </div>
    </div>
</div>
