{% load static %}

{% if user.profile_image %}
    <img src="{{ user.profile_image.url }}"
         class="object-fit-cover {{ css_class }}"
         width="{{ size }}"
         height="{{ size }}"
         alt="{{ user.get_display_name }}">
{% else %}
    {% comment %} Display initials as profile picture {% endcomment %}
    {% with display_name=user.get_full_name|default:user.username %}
    {% with initials=display_name|slice:":2"|upper %}
    <div class="avatar-initials {{ css_class }}"
         style="width: {{ size }}px;
                height: {{ size }}px;
                border-radius: 50%;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                display: flex;
                align-items: center;
                justify-content: center;
                font-weight: 700;
                font-size: calc({{ size }}px * 0.4);
                text-transform: uppercase;
                line-height: 1;
                flex-shrink: 0;
                letter-spacing: -0.05em;
                overflow: hidden;"
         title="{{ display_name }}">
        {{ initials }}
    </div>
    {% endwith %}
    {% endwith %}
{% endif %}
